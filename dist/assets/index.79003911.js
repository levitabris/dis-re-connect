import{u as t,d as e,g as o}from"./vendor.67ef6ad6.js";const r=t("%d/%m/%Y"),a=r("16/5/2020");Promise.all([fetch("../assets/ne_110m_admin_0_countries.geojson").then((t=>t.json())),fetch("../assets/COVID19_geo_dist.csv").then((t=>t.text())).then((t=>e(";").parse(t,(({dateRep:t,deaths:e,cases:o,countryterritoryCode:a,popData2018:n})=>({deaths:Number(e),cases:Number(o),popData2018:Number(n),countryterritoryCode:a.toString(),dateRep:r(t)}))))),fetch("../assets/arcs_by_10_clean.json").then((t=>t.json())),fetch("../assets/geocoded_institutions_clean.csv").then((t=>t.text())).then((t=>e(",").parse(t)))]).then((([t,e,r,n])=>{const s=o({animateIn:!0,rendererConfig:{antialias:!0,alpha:!0}})(document.getElementById("world-3d")).globeImageUrl("../assets/earth-dark.jpg").bumpImageUrl("../assets/earth-topology.png").pointOfView({lat:34.3416,lng:108.9398,altitude:2.4},0).width(1.2*window.innerWidth).height(1.05*window.innerHeight).polygonsData(t.features).polygonGeoJsonGeometry((t=>t.geometry)).polygonCapColor((()=>"rgba(0, 0, 0, 0.001)")).polygonStrokeColor((()=>"rgba(234, 26, 41, 1)")).polygonSideColor((()=>"rgba(193, 34, 84, .25)")).polygonLabel((t=>t.properties.SUBUNIT)).polygonAltitude((t=>{let o=e.filter((t=>t.dateRep-a<=0)).filter((e=>e.countryterritoryCode===t.properties.ISO_A3)).map((t=>t.cases/t.popData2018)).reduce(((t,e)=>t+e),0);return 5*Math.pow(o,.5)})).onPolygonClick((t=>{var e;e=`<h5>Institutions in ${t.properties.SUBUNIT}</h5>\n                        <p>${n.filter((t=>"NA"!==t.country.toString())).filter((e=>e.country===t.properties.SUBUNIT)).map((t=>t.name)).map((t=>t)).join("\n")}\n                        </p>\n                        `,document.getElementById("log").innerHTML=e,s.arcColor((e=>e.countries.includes(t.properties.SUBUNIT)?`rgba(0, 120, 240, ${.4+.2})`:`rgba(0, 120, 240, ${.4/6})`)).arcStroke((e=>e.countries.includes(t.properties.SUBUNIT)?.5:.001)).arcDashGap(.05)})).arcsData(r).arcAltitudeAutoScale(.5).arcStartLat((t=>Number(t.arc[0][0]))).arcStartLng((t=>Number(t.arc[0][1]))).arcEndLat((t=>Number(t.arc[1][0]))).arcEndLng((t=>Number(t.arc[1][1]))).arcColor((()=>"rgba(0, 120, 240, 0.4)")).arcStroke(.2).arcDashLength(.4).arcDashGap(.2).arcDashAnimateTime(2e3).arcLabel((t=>`\n                    <h2 class="paper-title">${t.title}</h2>\n                    <p class="country-label">${2===t.countries.length?`${t.countries[0]} x ${t.countries[1]}`:t.countries[0]}</p>\n                `)).pointsData(n).pointLat((t=>+t.lat)).pointLng((t=>+t.lon)).pointRadius(.3).pointAltitude(0).pointResolution(12).pointColor((()=>"rgba(0, 120, 240, .8)"));s.controls().autoRotate=!0,s.controls().autoRotateSpeed=.35}));
